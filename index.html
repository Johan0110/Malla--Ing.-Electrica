<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla – Ingeniería Eléctrica UNAL</title>

<style>
:root{
 --fund:#e6dcfa;
 --disc:#d8f3ee;
 --libre:#fff1cc;
 --bg:#f5f6fa;
 --card:#ffffff;
 --text:#1f2937;
}

*{box-sizing:border-box}

body{
 margin:0;
 font-family:'Inter','Segoe UI',system-ui,sans-serif;
 background:var(--bg);
 color:var(--text);
}

h1{
 text-align:center;
 margin:20px 0 10px;
 font-weight:600;
}

/* CONTENEDOR SUPERIOR */
.dashboard{
 max-width:1200px;
 margin:0 auto;
 padding:15px;
}

.summary{
 display:grid;
 grid-template-columns:2fr 1fr;
 gap:16px;
}

.box{
 background:var(--card);
 border-radius:18px;
 padding:18px;
 box-shadow:0 8px 24px rgba(0,0,0,.06);
}

/* CONTADOR GRANDE */
.big-counter{
 font-size:32px;
 font-weight:700;
 margin-bottom:10px;
}
.big-counter span{
 font-size:14px;
 font-weight:500;
 color:#6b7280;
}

/* PROGRESO */
.progress-group{
 margin-bottom:14px;
}
.progress-group small{
 font-weight:600;
}

.bar{
 height:10px;
 background:#e5e7eb;
 border-radius:10px;
 overflow:hidden;
 margin-top:6px;
}

.bar span{
 display:block;
 height:100%;
}

/* LEYENDA */
.legend{
 display:flex;
 gap:10px;
 flex-wrap:wrap;
}
.legend div{
 padding:6px 14px;
 border-radius:20px;
 font-size:12px;
}

/* BOTÓN */
button{
 border:none;
 padding:10px 18px;
 border-radius:14px;
 background:#ef4444;
 color:#fff;
 cursor:pointer;
 font-weight:600;
}
button:hover{opacity:.9}

/* MALLA */
.grid{
 max-width:1200px;
 margin:20px auto;
 padding:15px;
 display:grid;
 grid-template-columns:repeat(10,1fr);
 gap:14px;
}

.semester{
 background:var(--card);
 border-radius:20px;
 padding:12px;
 box-shadow:0 6px 18px rgba(0,0,0,.05);
}

.semester h3{
 text-align:center;
 font-size:13px;
 margin:6px 0 10px;
 font-weight:600;
}

.course{
 border-radius:16px;
 padding:10px;
 margin-bottom:8px;
 font-size:12px;
 cursor:pointer;
 position:relative;
 transition:.2s;
}

.course:hover{transform:translateY(-2px)}

.course.approved{
 text-decoration:line-through;
 opacity:.85;
}

.course.locked::after{
 content:"Bloqueada";
 position:absolute;
 inset:0;
 background:rgba(255,255,255,.8);
 display:flex;
 align-items:center;
 justify-content:center;
 border-radius:16px;
 font-size:11px;
 font-weight:600;
 color:#555;
}

/* COLORES COMPONENTES */
.fund{background:var(--fund)}
.disc{background:var(--disc)}
.libre{background:var(--libre)}

.footer{
 text-align:center;
 font-size:12px;
 color:#777;
 margin:20px 0;
}
</style>
</head>

<body>

<h1>Malla Curricular – Ingeniería Eléctrica (UNAL)</h1>

<div class="dashboard">
 <div class="summary">
  <div class="box" id="stats"></div>

  <div class="box">
   <div class="legend">
    <div style="background:var(--fund)">Fundamentación</div>
    <div style="background:var(--disc)">Disciplinar</div>
    <div style="background:var(--libre)">Libre Elección</div>
   </div>
   <br>
   <button onclick="resetAll()">Restablecer progreso</button>
  </div>
 </div>
</div>

<div class="grid" id="grid"></div>

<div class="footer">
 Haz clic en una materia para marcarla como aprobada · El progreso se guarda automáticamente
</div>

<script>
const data=[
{sem:1,id:'1000004',name:'Cálculo Diferencial'},
{sem:1,id:'1000008',name:'Geometría Vectorial y Analítica'},
{sem:1,id:'3009531',name:'Introducción a la Ingeniería Eléctrica'},

{sem:2,id:'1000005',name:'Cálculo Integral',req:['1000004']},
{sem:2,id:'1000003',name:'Álgebra Lineal',req:['1000008']},
{sem:2,id:'1000019',name:'Física Mecánica',req:['1000004','1000008']},
{sem:2,id:'3010481',name:'Análisis de Circuitos Eléctricos I',req:['1000004']},

{sem:3,id:'1000006',name:'Cálculo en Varias Variables',req:['1000005']},
{sem:3,id:'1000007',name:'Ecuaciones Diferenciales',req:['1000005','1000003']},
{sem:3,id:'1000017',name:'Física de Electricidad y Magnetismo',req:['1000019','1000005']},
{sem:3,id:'3010435',name:'Fundamentos de Programación'},
{sem:3,id:'3010478',name:'Termodinámica General',req:['1000019']},
 
{sem:4,id:'3010651',name:'Estadística I',req:['1000005']},
{sem:4,id:'3006905',name:'Matemáticas Especiales',req:['1000007']},
{sem:4,id:'3006907',name:'Metodos Numericos',req:['1000005','1000003','1000006','3006905']},
{sem:4,id:'3010496',name:'Análisis de Circuitos Eléctricos II',req:['3010481','1000007']},
{sem:4,id:'3007756',name:'Laboratorio De Circuitos',req:['3010496']},
 
{sem:5,id:'3010481',name:'Análisis de Circuitos Eléctricos I',req:['1000004']},
{sem:5,id:'3010435',name:'Fundamentos de Programación'},
{sem:5,id:'3006907',name:'Métodos Numéricos',req:['1000005','1000003']},

{sem:6,id:'3010496',name:'Análisis de Circuitos Eléctricos II',req:['3010481','1000007']},
{sem:6,id:'3007756',name:'Laboratorio de Circuitos',req:['3010496']},
{sem:6,id:'3010520',name:'Teoría Electromagnética',req:['1000017']},

{sem:7,id:'3010421',name:'Señales y Sistemas Lineales',req:['3006905']},
{sem:7,id:'3010402',name:'Control Entrada-Salida',req:['3010421']},
{sem:7,id:'3010458',name:'Electrónica Análoga I',req:['3010496','3007756']},

{sem:8,id:'3010457',name:'Electrónica Análoga II',req:['3010458']},
{sem:8,id:'3010483',name:'Electrónica Digital',req:['3010458']},

{sem:9,id:'3010490',name:'Modelado de Líneas de Transmisión',req:['1000006','3006905','3010520']},
{sem:9,id:'3010661',name:'Máquinas Eléctricas I',req:['3010520']},
{sem:9,id:'3010494',name:'Telecomunicaciones',req:['3010421','3010483']},

{sem:10,id:'3010662',name:'Máquinas Eléctricas II',req:['3010661']},
{sem:10,id:'3010529',name:'Sistemas de Generación de Energía Eléctrica',req:['3010662','3010478']}
];

let done=JSON.parse(localStorage.getItem('ie_done')||'[]');
const grid=document.getElementById('grid');
const stats=document.getElementById('stats');

function calc(type){
 const total=data.filter(x=>x.t===type).reduce((s,x)=>s+x.c,0);
 const d=data.filter(x=>x.t===type && done.includes(x.id)).reduce((s,x)=>s+x.c,0);
 return {d,total,p:Math.round(d/total*100)||0}
}

function render(){
 grid.innerHTML='';
 const f=calc('fund'), d=calc('disc'), l=calc('libre');
 const totalDone=f.d+d.d+l.d;
 const totalAll=data.reduce((s,x)=>s+x.c,0);

 stats.innerHTML=`
 <div class="big-counter">
  ${totalDone} <span>/ ${totalAll} créditos</span>
 </div>

 <div class="progress-group">
  <small>Fundamentación ${f.p}%</small>
  <div class="bar"><span style="width:${f.p}%;background:#9b87d4"></span></div>
 </div>

 <div class="progress-group">
  <small>Disciplinar ${d.p}%</small>
  <div class="bar"><span style="width:${d.p}%;background:#55c9b2"></span></div>
 </div>

 <div class="progress-group">
  <small>Libre Elección ${l.p}%</small>
  <div class="bar"><span style="width:${l.p}%;background:#f2c14e"></span></div>
 </div>
 `;

 for(let s=1;s<=10;s++){
  const col=document.createElement('div');
  col.className='semester';
  col.innerHTML=`<h3>Semestre ${s}</h3>`;
  data.filter(x=>x.sem===s).forEach(c=>{
   const locked=c.fund && f.p<c.fund;
   const div=document.createElement('div');
   div.className=`course ${c.t} ${done.includes(c.id)?'approved':''} ${locked?'locked':''}`;
   div.innerHTML=`<b>${c.n}</b><br>${c.c} créditos`;
   div.onclick=()=>{
    if(locked)return;
    done.includes(c.id)?done=done.filter(x=>x!==c.id):done.push(c.id);
    localStorage.setItem('ie_done',JSON.stringify(done));
    render();
   };
   col.appendChild(div);
  });
  grid.appendChild(col);
 }
}

function resetAll(){
 done=[];
 localStorage.removeItem('ie_done');
 render();
}

render();
</script>

</body>
</html>

