<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular – Ingeniería Eléctrica UNAL</title>
<style>
body{margin:0;font-family:'Segoe UI',system-ui,sans-serif;background:#f4f6f9;color:#2c3e50}
h1{text-align:center;margin:20px 0}
.container{display:grid;grid-template-columns:repeat(10,1fr);gap:12px;padding:20px}
.semester{background:#fff;border-radius:14px;box-shadow:0 4px 10px rgba(0,0,0,.08);padding:10px}
.semester h2{text-align:center;font-size:14px;margin:6px 0 10px;color:#34495e}
.course{background:#e9f0fa;border-radius:10px;padding:8px;margin-bottom:8px;font-size:12px;cursor:pointer;transition:.2s;position:relative}
.course:hover{transform:scale(1.02)}
.course.approved{background:#c8eed4;text-decoration:line-through}
.course.locked{background:#f0f0f0;color:#aaa;cursor:not-allowed}
.course.locked:hover::after{content:attr(data-tip);position:absolute;left:0;top:105%;background:#333;color:#fff;font-size:11px;padding:5px 7px;border-radius:6px;white-space:nowrap;z-index:10}
.footer{text-align:center;font-size:12px;color:#777;margin-bottom:20px}
</style>
</head>
<body>
<h1>Malla Curricular Interactiva – Ingeniería Eléctrica (UNAL)</h1>
<div class="container" id="malla"></div>
<div class="footer">Haz clic en una asignatura para marcarla como aprobada · El progreso se guarda automáticamente</div>
<script>
const data=[
{sem:1,id:'1000004',name:'Cálculo Diferencial'},
{sem:1,id:'1000008',name:'Geometría Vectorial y Analítica'},
{sem:1,id:'3009531',name:'Introducción a la Ingeniería Eléctrica'},

{sem:2,id:'1000005',name:'Cálculo Integral',req:['1000004']},
{sem:2,id:'1000003',name:'Álgebra Lineal',req:['1000008']},
{sem:2,id:'1000019',name:'Física Mecánica',req:['1000004','1000008']},

{sem:3,id:'1000006',name:'Cálculo en Varias Variables',req:['1000005']},
{sem:3,id:'1000007',name:'Ecuaciones Diferenciales',req:['1000005','1000003']},
{sem:3,id:'1000017',name:'Física de Electricidad y Magnetismo',req:['1000019','1000005']},

{sem:4,id:'3006905',name:'Matemáticas Especiales',req:['1000007']},
{sem:4,id:'3010651',name:'Estadística I',req:['1000005']},
{sem:4,id:'3010478',name:'Termodinámica General',req:['1000019']},

{sem:5,id:'3010481',name:'Análisis de Circuitos Eléctricos I',req:['1000004']},
{sem:5,id:'3010435',name:'Fundamentos de Programación'},
{sem:5,id:'3006907',name:'Métodos Numéricos',req:['1000005','1000003']},

{sem:6,id:'3010496',name:'Análisis de Circuitos Eléctricos II',req:['3010481','1000007']},
{sem:6,id:'3007756',name:'Laboratorio de Circuitos',req:['3010496']},
{sem:6,id:'3010520',name:'Teoría Electromagnética',req:['1000017']},

{sem:7,id:'3010421',name:'Señales y Sistemas Lineales',req:['3006905']},
{sem:7,id:'3010402',name:'Control Entrada-Salida',req:['3010421']},
{sem:7,id:'3010458',name:'Electrónica Análoga I',req:['3010496','3007756']},

{sem:8,id:'3010457',name:'Electrónica Análoga II',req:['3010458']},
{sem:8,id:'3010483',name:'Electrónica Digital',req:['3010458']},

{sem:9,id:'3010490',name:'Modelado de Líneas de Transmisión',req:['1000006','3006905','3010520']},
{sem:9,id:'3010661',name:'Máquinas Eléctricas I',req:['3010520']},
{sem:9,id:'3010494',name:'Telecomunicaciones',req:['3010421','3010483']},

{sem:10,id:'3010662',name:'Máquinas Eléctricas II',req:['3010661']},
{sem:10,id:'3010529',name:'Sistemas de Generación de Energía Eléctrica',req:['3010662','3010478']}
];

let approved=JSON.parse(localStorage.getItem('ie_unal_aprobadas')||'[]');
const malla=document.getElementById('malla');

function render(){
 malla.innerHTML='';
 for(let s=1;s<=10;s++){
  const col=document.createElement('div');
  col.className='semester';
  col.innerHTML=`<h2>Semestre ${s}</h2>`;
  data.filter(c=>c.sem===s).forEach(c=>{
   const locked=c.req && !c.req.every(r=>approved.includes(r));
   const d=document.createElement('div');
   d.className='course'+(approved.includes(c.id)?' approved':'')+(locked?' locked':'');
   d.textContent=c.name;
   if(locked){d.dataset.tip='Faltan prerrequisitos'}
   d.onclick=()=>{
    if(locked) return;
    approved.includes(c.id)?approved=approved.filter(x=>x!==c.id):approved.push(c.id);
    localStorage.setItem('ie_unal_aprobadas',JSON.stringify(approved));
    render();
   }
   col.appendChild(d);
  })
  malla.appendChild(col);
 }
}
render();
</script>
</body>
</html>
