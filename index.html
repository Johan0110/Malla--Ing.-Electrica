<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla – Ingeniería Eléctrica UNAL</title>

<style>
:root{
 --fund:#e6dcfa;
 --disc:#d8f3ee;
 --libre:#fff1cc;
 --bg:#f5f6fa;
 --card:#ffffff;
 --text:#1f2937;
}

*{box-sizing:border-box}

body{
 margin:0;
 font-family:'Inter','Segoe UI',system-ui,sans-serif;
 background:var(--bg);
 color:var(--text);
}

h1{
 text-align:center;
 margin:20px 0 10px;
 font-weight:600;
}

/* CONTENEDOR SUPERIOR */
.dashboard{
 max-width:1200px;
 margin:0 auto;
 padding:15px;
}

.summary{
 display:grid;
 grid-template-columns:2fr 1fr;
 gap:16px;
}

.box{
 background:var(--card);
 border-radius:18px;
 padding:18px;
 box-shadow:0 8px 24px rgba(0,0,0,.06);
}

/* CONTADOR GRANDE */
.big-counter{
 font-size:32px;
 font-weight:700;
 margin-bottom:10px;
}
.big-counter span{
 font-size:14px;
 font-weight:500;
 color:#6b7280;
}

/* PROGRESO */
.progress-group{
 margin-bottom:14px;
}
.progress-group small{
 font-weight:600;
}

.bar{
 height:10px;
 background:#e5e7eb;
 border-radius:10px;
 overflow:hidden;
 margin-top:6px;
}

.bar span{
 display:block;
 height:100%;
}

/* LEYENDA */
.legend{
 display:flex;
 gap:10px;
 flex-wrap:wrap;
}
.legend div{
 padding:6px 14px;
 border-radius:20px;
 font-size:12px;
}

/* BOTÓN */
button{
 border:none;
 padding:10px 18px;
 border-radius:14px;
 background:#ef4444;
 color:#fff;
 cursor:pointer;
 font-weight:600;
}
button:hover{opacity:.9}

/* MALLA */
.grid{
 max-width:1200px;
 margin:20px auto;
 padding:15px;
 display:grid;
 grid-template-columns:repeat(10,1fr);
 gap:14px;
}

.semester{
 background:var(--card);
 border-radius:20px;
 padding:12px;
 box-shadow:0 6px 18px rgba(0,0,0,.05);
}

.semester h3{
 text-align:center;
 font-size:13px;
 margin:6px 0 10px;
 font-weight:600;
}

.course{
 border-radius:16px;
 padding:10px;
 margin-bottom:8px;
 font-size:12px;
 cursor:pointer;
 position:relative;
 transition:.2s;
}

.course:hover{transform:translateY(-2px)}

.course.approved{
 text-decoration:line-through;
 opacity:.85;
}

.course.locked::after{
 content:"Bloqueada";
 position:absolute;
 inset:0;
 background:rgba(255,255,255,.8);
 display:flex;
 align-items:center;
 justify-content:center;
 border-radius:16px;
 font-size:11px;
 font-weight:600;
 color:#555;
}

/* COLORES COMPONENTES */
.fund{background:var(--fund)}
.disc{background:var(--disc)}
.libre{background:var(--libre)}

.footer{
 text-align:center;
 font-size:12px;
 color:#777;
 margin:20px 0;
}
</style>
</head>

<body>

<h1>Malla Curricular – Ingeniería Eléctrica (UNAL)</h1>

<div class="dashboard">
 <div class="summary">
  <div class="box" id="stats"></div>

  <div class="box">
   <div class="legend">
    <div style="background:var(--fund)">Fundamentación</div>
    <div style="background:var(--disc)">Disciplinar</div>
    <div style="background:var(--libre)">Libre Elección</div>
   </div>
   <br>
   <button onclick="resetAll()">Restablecer progreso</button>
  </div>
 </div>
</div>

<div class="grid" id="grid"></div>

<div class="footer">
 Haz clic en una materia para marcarla como aprobada · El progreso se guarda automáticamente
</div>

<script>
const data=[
{sem:1,id:'1',n:'Cálculo Diferencial',c:4,t:'fund'},
{sem:1,id:'2',n:'Geometría Vectorial',c:4,t:'fund'},
{sem:1,id:'3',n:'Introducción a la Ingeniería Eléctrica',c:2,t:'disc'},
{sem:1,id:'4',n:'Libre Elección',c:3,t:'libre'},
{sem:1,id:'5',n:'Libre Elección',c:3,t:'libre'},

{sem:2,id:'6',n:'Cálculo Integral',c:4,t:'fund'},
{sem:2,id:'7',n:'Álgebra Lineal',c:4,t:'fund'},
{sem:2,id:'8',n:'Física Mecánica',c:4,t:'fund'},
{sem:2,id:'9',n:'Circuitos I',c:3,t:'disc'},
{sem:2,id:'10',n:'Libre Elección',c:3,t:'libre'},

{sem:3,id:'11',n:'Cálculo Multivariable',c:4,t:'fund'},
{sem:3,id:'12',n:'Ecuaciones Diferenciales',c:4,t:'fund'},
{sem:3,id:'13',n:'Electricidad y Magnetismo',c:4,t:'fund'},
{sem:3,id:'14',n:'Fundamentos de Programación',c:3,t:'fund'},
{sem:3,id:'15',n:'Termodinámica',c:3,t:'disc'},

{sem:4,id:'16',n:'Estadística I',c:3,t:'fund'},
{sem:4,id:'17',n:'Matemáticas Especiales',c:4,t:'fund'},
{sem:4,id:'18',n:'Métodos Numéricos',c:4,t:'fund'},
{sem:4,id:'19',n:'Circuitos II',c:3,t:'disc'},
{sem:4,id:'20',n:'Laboratorio de Circuitos',c:1,t:'disc',fund:40},

{sem:5,id:'21',n:'Señales y Sistemas',c:3,t:'disc'},
{sem:5,id:'22',n:'Teoría Electromagnética',c:3,t:'disc'},
{sem:5,id:'23',n:'Electrónica Análoga',c:3,t:'disc'},
{sem:5,id:'24',n:'Libre Elección',c:3,t:'libre'},

{sem:6,id:'25',n:'Líneas de Transmisión',c:3,t:'disc'},
{sem:6,id:'26',n:'Control',c:3,t:'disc'},
{sem:6,id:'27',n:'Máquinas Eléctricas I',c:3,t:'disc'},
{sem:6,id:'28',n:'Electrónica Digital',c:3,t:'disc'},

{sem:7,id:'29',n:'Instalaciones Eléctricas',c:3,t:'disc'},
{sem:7,id:'30',n:'Máquinas Eléctricas II',c:3,t:'disc'},
{sem:7,id:'31',n:'Telecomunicaciones',c:3,t:'disc'},
{sem:7,id:'32',n:'Optativa Disciplinar',c:3,t:'disc'},

{sem:8,id:'33',n:'Laboratorio de Máquinas',c:2,t:'disc'},
{sem:8,id:'34',n:'Generación de Energía',c:3,t:'disc'},
{sem:8,id:'35',n:'Sistemas de Potencia',c:3,t:'disc'},
{sem:8,id:'36',n:'Automatización',c:3,t:'disc'},
{sem:8,id:'37',n:'Libre Elección',c:3,t:'libre'},

{sem:9,id:'38',n:'Redes Eléctricas',c:3,t:'disc'},
{sem:9,id:'39',n:'Protecciones Eléctricas',c:3,t:'disc'},
{sem:9,id:'40',n:'Optativa Disciplinar',c:3,t:'disc'},
{sem:9,id:'41',n:'Libre Elección',c:3,t:'libre'},

{sem:10,id:'42',n:'Trabajo de Grado',c:6,t:'disc'},
{sem:10,id:'43',n:'Libre Elección',c:3,t:'libre'},
{sem:10,id:'44',n:'Libre Elección',c:3,t:'libre'},
{sem:10,id:'45',n:'Libre Elección',c:4,t:'libre'}
];

let done=JSON.parse(localStorage.getItem('ie_done')||'[]');
const grid=document.getElementById('grid');
const stats=document.getElementById('stats');

function calc(type){
 const total=data.filter(x=>x.t===type).reduce((s,x)=>s+x.c,0);
 const d=data.filter(x=>x.t===type && done.includes(x.id)).reduce((s,x)=>s+x.c,0);
 return {d,total,p:Math.round(d/total*100)||0}
}

function render(){
 grid.innerHTML='';
 const f=calc('fund'), d=calc('disc'), l=calc('libre');
 const totalDone=f.d+d.d+l.d;
 const totalAll=data.reduce((s,x)=>s+x.c,0);

 stats.innerHTML=`
 <div class="big-counter">
  ${totalDone} <span>/ ${totalAll} créditos</span>
 </div>

 <div class="progress-group">
  <small>Fundamentación ${f.p}%</small>
  <div class="bar"><span style="width:${f.p}%;background:#9b87d4"></span></div>
 </div>

 <div class="progress-group">
  <small>Disciplinar ${d.p}%</small>
  <div class="bar"><span style="width:${d.p}%;background:#55c9b2"></span></div>
 </div>

 <div class="progress-group">
  <small>Libre Elección ${l.p}%</small>
  <div class="bar"><span style="width:${l.p}%;background:#f2c14e"></span></div>
 </div>
 `;

 for(let s=1;s<=10;s++){
  const col=document.createElement('div');
  col.className='semester';
  col.innerHTML=`<h3>Semestre ${s}</h3>`;
  data.filter(x=>x.sem===s).forEach(c=>{
   const locked=c.fund && f.p<c.fund;
   const div=document.createElement('div');
   div.className=`course ${c.t} ${done.includes(c.id)?'approved':''} ${locked?'locked':''}`;
   div.innerHTML=`<b>${c.n}</b><br>${c.c} créditos`;
   div.onclick=()=>{
    if(locked)return;
    done.includes(c.id)?done=done.filter(x=>x!==c.id):done.push(c.id);
    localStorage.setItem('ie_done',JSON.stringify(done));
    render();
   };
   col.appendChild(div);
  });
  grid.appendChild(col);
 }
}

function resetAll(){
 done=[];
 localStorage.removeItem('ie_done');
 render();
}

render();
</script>

</body>
</html>

