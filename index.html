<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular – Ingeniería Eléctrica UNAL</title>

<style>
body{
 margin:0;
 font-family:'Segoe UI',system-ui,sans-serif;
 background:#f4f6f9;
 color:#2c3e50
}

h1{text-align:center;margin:15px 0}

/* CONTADOR */
.counter{
 background:#fff;
 margin:10px auto;
 padding:10px;
 width:95%;
 max-width:1100px;
 border-radius:12px;
 box-shadow:0 4px 10px rgba(0,0,0,.08);
 font-size:14px
}

.progress{
 height:8px;
 background:#e0e0e0;
 border-radius:6px;
 overflow:hidden;
 margin:5px 0 10px
}

.progress span{
 display:block;
 height:100%
}

/* LEYENDA */
.legend{
 display:flex;
 gap:15px;
 justify-content:center;
 margin:10px 0
}
.legend div{
 padding:6px 12px;
 border-radius:10px;
 font-size:12px
}

/* MALLA */
.container{
 display:grid;
 grid-template-columns:repeat(10,1fr);
 gap:12px;
 padding:15px
}

.semester{
 background:#fff;
 border-radius:14px;
 box-shadow:0 4px 10px rgba(0,0,0,.08);
 padding:10px
}

.semester h2{
 text-align:center;
 font-size:14px;
 margin:6px 0 10px
}

.course{
 border-radius:10px;
 padding:8px;
 margin-bottom:8px;
 font-size:12px;
 cursor:pointer;
 transition:.2s;
 opacity:.85
}
.course:hover{transform:scale(1.03)}

.course.approved{
 text-decoration:line-through;
 opacity:1
}

.course.locked{
 background:#ddd!important;
 color:#aaa;
 cursor:not-allowed
}

/* COLORES COMPONENTES */
.fund{background:#efe7f8}
.disc{background:#e0f5f1}
.libre{background:#fff1c9}

/* BOTÓN */
button{
 border:none;
 background:#e74c3c;
 color:#fff;
 padding:8px 14px;
 border-radius:10px;
 cursor:pointer
}
button:hover{opacity:.9}

.footer{
 text-align:center;
 font-size:12px;
 color:#777;
 margin:15px
}
</style>
</head>

<body>

<h1>Malla Curricular Interactiva – Ingeniería Eléctrica (UNAL)</h1>

<div class="counter" id="counter"></div>

<div class="legend">
 <div class="fund">Fundamentación</div>
 <div class="disc">Disciplinar</div>
 <div class="libre">Libre Elección</div>
</div>

<div style="text-align:center">
 <button onclick="resetAll()">Restablecer créditos</button>
</div>

<div class="container" id="malla"></div>

<div class="footer">
 Clic para aprobar materias · Avances guardados automáticamente
</div>

<script>
const data=[
{sem:1,id:'c1',name:'Cálculo Diferencial',cred:4,comp:'fund'},
{sem:1,id:'c2',name:'Geometría Vectorial',cred:4,comp:'fund'},
{sem:1,id:'c3',name:'Intro Ing. Eléctrica',cred:2,comp:'disc'},
{sem:1,id:'c4',name:'Libre Elección',cred:3,comp:'libre'},
{sem:1,id:'c5',name:'Libre Elección',cred:3,comp:'libre'},

{sem:2,id:'c6',name:'Cálculo Integral',cred:4,comp:'fund',req:['c1']},
{sem:2,id:'c7',name:'Álgebra Lineal',cred:4,comp:'fund',req:['c2']},
{sem:2,id:'c8',name:'Física Mecánica',cred:4,comp:'fund'},
{sem:2,id:'c9',name:'Circuitos I',cred:3,comp:'disc'},
{sem:2,id:'c10',name:'Libre Elección',cred:3,comp:'libre'},

{sem:3,id:'c11',name:'Cálculo Multivariable',cred:4,comp:'fund'},
{sem:3,id:'c12',name:'Ecuaciones Diferenciales',cred:4,comp:'fund'},
{sem:3,id:'c13',name:'Electricidad y Magnetismo',cred:4,comp:'fund'},
{sem:3,id:'c14',name:'Programación',cred:3,comp:'fund'},
{sem:3,id:'c15',name:'Termodinámica',cred:3,comp:'disc'},

{sem:4,id:'c16',name:'Estadística I',cred:3,comp:'fund'},
{sem:4,id:'c17',name:'Matemáticas Especiales',cred:4,comp:'fund'},
{sem:4,id:'c18',name:'Métodos Numéricos',cred:4,comp:'fund'},
{sem:4,id:'c19',name:'Circuitos II',cred:3,comp:'disc'},
{sem:4,id:'c20',name:'Lab. Circuitos',cred:1,comp:'disc',fundPercent:40},

{sem:5,id:'c21',name:'Señales y Sistemas',cred:3,comp:'disc'},
{sem:5,id:'c22',name:'Electromagnetismo',cred:3,comp:'disc'},
{sem:5,id:'c23',name:'Electrónica Análoga',cred:3,comp:'disc'},
{sem:5,id:'c24',name:'Libre Elección',cred:3,comp:'libre'},

{sem:6,id:'c25',name:'Líneas de Transmisión',cred:3,comp:'disc'},
{sem:6,id:'c26',name:'Control',cred:3,comp:'disc'},
{sem:6,id:'c27',name:'Máquinas I',cred:3,comp:'disc'},
{sem:6,id:'c28',name:'Electrónica Digital',cred:3,comp:'disc'},

{sem:7,id:'c29',name:'Instalaciones',cred:3,comp:'disc'},
{sem:7,id:'c30',name:'Máquinas II',cred:3,comp:'disc'},
{sem:7,id:'c31',name:'Telecomunicaciones',cred:3,comp:'disc'},
{sem:7,id:'c32',name:'Optativa',cred:3,comp:'disc'},

{sem:8,id:'c33',name:'Lab Máquinas',cred:2,comp:'disc'},
{sem:8,id:'c34',name:'Generación',cred:3,comp:'disc'},
{sem:8,id:'c35',name:'Sistemas de Potencia',cred:3,comp:'disc'},
{sem:8,id:'c36',name:'Automatización',cred:3,comp:'disc'},
{sem:8,id:'c37',name:'Libre Elección',cred:3,comp:'libre'},

{sem:9,id:'c38',name:'Redes Eléctricas',cred:3,comp:'disc'},
{sem:9,id:'c39',name:'Protecciones',cred:3,comp:'disc'},
{sem:9,id:'c40',name:'Optativa',cred:3,comp:'disc'},
{sem:9,id:'c41',name:'Libre Elección',cred:3,comp:'libre'},

{sem:10,id:'c42',name:'Trabajo de Grado',cred:6,comp:'disc'},
{sem:10,id:'c43',name:'Libre Elección',cred:3,comp:'libre'},
{sem:10,id:'c44',name:'Libre Elección',cred:3,comp:'libre'},
{sem:10,id:'c45',name:'Libre Elección',cred:4,comp:'libre'}
];

let approved=JSON.parse(localStorage.getItem('aprobadas')||'[]');
const malla=document.getElementById('malla');
const counter=document.getElementById('counter');

function calc(comp){
 const total=data.filter(c=>c.comp===comp).reduce((s,c)=>s+c.cred,0);
 const done=data.filter(c=>c.comp===comp && approved.includes(c.id)).reduce((s,c)=>s+c.cred,0);
 return {total,done,percent:Math.round(done/total*100)||0}
}

function render(){
 malla.innerHTML='';
 const f=calc('fund'), d=calc('disc'), l=calc('libre');
 const totalDone=f.done+d.done+l.done;
 const totalAll=data.reduce((s,c)=>s+c.cred,0);

 counter.innerHTML=`
 <b>Total:</b> ${totalDone}/${totalAll} créditos<br>
 Fundamentación ${f.percent}%
 <div class="progress"><span style="width:${f.percent}%;background:#b69cd8"></span></div>
 Disciplinar ${d.percent}%
 <div class="progress"><span style="width:${d.percent}%;background:#7fd6c3"></span></div>
 Libre Elección ${l.percent}%
 <div class="progress"><span style="width:${l.percent}%;background:#e8c25d"></span></div>
 `;

 for(let s=1;s<=10;s++){
  const col=document.createElement('div');
  col.className='semester';
  col.innerHTML=`<h2>Semestre ${s}</h2>`;
  data.filter(c=>c.sem===s).forEach(c=>{
   let locked=false;
   if(c.fundPercent && f.percent<c.fundPercent)locked=true;
   const d=document.createElement('div');
   d.className=`course ${c.comp} ${approved.includes(c.id)?'approved':''} ${locked?'locked':''}`;
   d.innerHTML=`<b>${c.name}</b><br>${c.cred} créditos`;
   d.onclick=()=>{
    if(locked)return;
    approved.includes(c.id)?approved=approved.filter(x=>x!==c.id):approved.push(c.id);
    localStorage.setItem('aprobadas',JSON.stringify(approved));
    render();
   };
   col.appendChild(d);
  });
  malla.appendChild(col);
 }
}

function resetAll(){
 approved=[];
 localStorage.removeItem('aprobadas');
 render();
}

render();
</script>

</body>
</html>

